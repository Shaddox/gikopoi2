<!doctype html>
<title>Stream Tab</title>
<style>
    button {
        display: none;
    }

    .ui-resizable-handle {
        display: none;
    }

    video {
        margin: 0;
        padding: 0;
        border: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: black;
    }

    body {
        background-color: black;
        font-family: IPAMonaPGothic,'IPA モナー Pゴシック',Monapo,Mona,'MS PGothic','ＭＳ Ｐゴシック',submona,sans-serif;
    }

    p {
        color: white;
        text-align: center;
    }

    .vtuber-character {
        position: absolute;
        height: 68%;
        right: -6%;
        bottom: -29%;
        transform: scale(-1, 1);
        animation: 5s ease-in-out 0s infinite alternate vtuber_character_swaying;
    }

    .vtuber-character.jumping {
        animation: 0.1s ease-in 0s infinite alternate vtuber_character_jumping;
    }

    @keyframes vtuber_character_jumping {
        from {
            bottom: -29%
        }

        to {
            bottom: -23%
        }
    }

    @keyframes vtuber_character_swaying {
        from {
            transform: scale(-1, 1) rotate(-5deg);
        }

        to {
            transform: scale(-1, 1) rotate(5deg);
        }
    }

    .nico-nico-messages-container {
        width: 100%; /* width gets readjusted by javascript every half second */
        position: absolute;
        height: 100%;
        top: 0px;
        left: 50%;
        transform: translateX(-50%);
        overflow: hidden;
    }

    .nico-nico-messages-container svg {
        position: absolute;
        left: 0;
        height: 10%;
        transform: translate(-100%, 0);
        animation: nico-nico-message-animation 3s linear infinite;
        stroke: white;
        fill: white;
    }

    @keyframes nico-nico-message-animation {
        0% {
            left: 100%;
            transform: translate(0, 0);
        }

        100% {
            left: 0;
            transform: translate(-100%, 0);
        }
    }
</style>

<body>
<script>
    // set width of nico-nico-messages-container to be the same as the video that's being 
    // displayed (I couldn't find a way to do it with pure CSS, please forgive me...)
    function adjustNiconicoMessagesContainerSize()
    {
        const videoElements = document.getElementsByClassName("video-being-played")
        if (videoElements.length == 0)
            return

        const videoElement = videoElements[0]
        const width = (videoElement.videoWidth / videoElement.videoHeight) * videoElement.clientHeight

        const niconicoMessagesContainer = document.getElementsByClassName("nico-nico-messages-container")[0]
        niconicoMessagesContainer.style.width = width + "px"
    }

    setInterval(adjustNiconicoMessagesContainerSize, 500)
</script>
</body>

</html>